<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
<h2>JavaScript Arrays</h2>

<p>Click the button to get every element in the array that has a value above this number.</p>

<p><input type="number" id="ageToCheck" value="18"></p>
<button onclick="myFunction()">Try it</button>

<p id="demo"></p>

<script>

const ages = [12, 19, 15];

function checkAge(age) {
  return age > document.getElementById("ageToCheck").value;
}

function myFunction() {
  document.getElementById("demo").innerHTML = ages.filter(checkAge);

}
</script>
<!---------------------------------------------------------------- -->

<p>Click the button to get every element in the array that has a name similar</p>
<p><input type="text" id="nameToCheck" value="Pierre"></p>
<button onclick="myFunctionname()">Try it</button>
<p id="demoname"></p>

<script>
	const names = ['Pierre', 'Paul', 'Jacques'];
	function checkName(name) {
	  return name == document.getElementById("nameToCheck").value;
	}
	function myFunctionname() {
	  // document.getElementById("demoname").innerHTML = names.filter(checkName);
	  // document.getElementById("demoname").innerHTML = names.filter(name => name.length > 6);
	  document.getElementById("demoname").innerHTML = names.filter(name => name.indexOf('P') > -1);
	}
</script>

<!-- ----------------------------------------- -->
<h2>JavaScript Arrays</h2>
<p>Click the button to get every element in the array that has a value above this number.</p>
<p><input type="text" id="sectorToCheck" value="e"></p>
<button onclick="myFunctionsector()">Try it</button>
<p id="demosector"></p>


<script>


// ------------------------ avec la l'objet json dans la page 
// const json = {
// 				"type":"FeatureCollection",
// 				"features": [
// 				{"type":"Feature", "properties":{"RecNum":10,"GTh":62,"Titre":"Th\u00e9\u00e2tre","R\u00e9f\u00e9renc":null,"Description":null}},
// 				{"type":"Feature",	"properties":{"RecNum":28,"GTh":10,"Titre":"Portique nord-ouest","R\u00e9f\u00e9renc":null,"Description":null}},
// 				{"type":"Feature","properties":{"RecNum":95,"GTh":11,"Titre":"Karakatsani","R\u00e9f\u00e9renc":null,"Description":null}}
// 				]};



//-------------------------------- avec l'objet json récupéré par Fetch 

// const promise1 = fetch('http://thacer.archaiodata.com/API/secteurs.json', {method: 'GET', mode: 'no-cors', cache: 'default'});

// const promise1 = fetch('https://mdn.github.io/learning-area/javascript/oojs/json/superheroes.json');

//   promise1
//   	.then(response => response.json())
//   	.then(json => console.log(json))
//   	.then(response => alert(JSON.stringify(response)))
//   	.catch(error => alert("Erreur : " + error));

//  promise1
//  	.then((response) => {
//  			console.log(response);
//  			const json = response.json();
 			
//  			console.log(json);
//  		});




// --------------------------------- avec XHR 
// var requestURL = 'https://mdn.github.io/learning-area/javascript/oojs/json/superheroes.json';
// var requestURL = 'http://thacer.archaiodata.com/API/secteurs.json';
// var requestURL = 'http://192.168.1.49/iDig/secteurs.json';
var requestURL = 'http://192.168.1.49/iDig/ΒΘ West 2013.exported/ΒΘ West 2013.json';


var request = new XMLHttpRequest();
request.open('GET', requestURL, true);
request.responseType = 'json';
request.send();

request.onload = function() {
  var superHeroes = request.response;
  // populateHeader(superHeroes);
  // showHeroes(superHeroes);
  const json = superHeroes;
  alert(JSON.stringify(superHeroes))
}


function myFunctionsector() {
	// document.getElementById("demosector").innerHTML = JSON.stringify(json.features.filter(sss => sss.properties.Titre.indexOf('tre') > -1));

	alert(JSON.stringify(json));
}
</script>

</body>
</html>